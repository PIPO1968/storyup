module.exports=[31894,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68384);let e=({userGrade:d,onTournamentComplete:e})=>{let f,[g,h]=c.default.useState(""),[i,j]=c.default.useState(null),[k,l]=c.default.useState(""),[m,n]=c.default.useState(""),[o,p]=c.default.useState(""),[q,r]=c.default.useState([]),[s,t]=c.default.useState(300),[u,v]=c.default.useState(!1),[w,x]=c.default.useState(0),[y,z]=c.default.useState(0),[A,B]=c.default.useState(1);c.default.useEffect(()=>{if(!g||u)return;if(0===s){v(!0),z(y-15),p("â° Tiempo agotado. -15 puntos");return}let a=setTimeout(()=>t(s-1),1e3);return()=>clearTimeout(a)},[s,g,u,y]);let C=[];try{C=a.f({"../questions/general-1primaria.json":{id:()=>83772,module:()=>a.r(83772)},"../questions/general-2primaria.json":{id:()=>13725,module:()=>a.r(13725)},"../questions/general-3primaria.json":{id:()=>98958,module:()=>a.r(98958)},"../questions/general-4primaria.json":{id:()=>83846,module:()=>a.r(83846)},"../questions/general-5primaria.json":{id:()=>60450,module:()=>a.r(60450)},"../questions/general-6primaria.json":{id:()=>31390,module:()=>a.r(31390)}})(`../questions/general-${d}primaria.json`)}catch{C=[]}function D(){if(q.length>=25)return void e(w,y);if(0===C.length){h("No hay preguntas disponibles para este curso."),v(!0);return}let a=C.filter(a=>!q.includes(a.pregunta));if(0===a.length){let a=Math.floor(Math.random()*C.length),b=C[a];h(b.pregunta),j(b),l(b.respuesta_correcta),n(""),p(""),t(300),v(!1),B(A+1);return}let b=Math.floor(Math.random()*a.length),c=a[b];h(c.pregunta),j(c),l(c.respuesta_correcta),n(""),p(""),t(300),v(!1),B(A+1),r([...q,c.pregunta])}function E(){if(u)return;let a=300-s,b=0;m.toLowerCase().trim()===k.toLowerCase().trim()?(x(w+1),a<=60?(b=10,p("âœ… Â¡Correcto! +10 puntos (rÃ¡pido)")):(b=5,p("âœ… Â¡Correcto! +5 puntos"))):a<=60?(b=-5,p(`âŒ Incorrecto. -5 puntos
La respuesta correcta era: ${k}`)):(b=-10,p(`âŒ Incorrecto. -10 puntos
La respuesta correcta era: ${k}`)),z(y+b),v(!0)}return(c.default.useEffect(()=>{C.length>0&&!g&&D()},[C]),q.length>=25)?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 flex items-center justify-center p-8",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8 text-center max-w-md",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"ðŸŽ¯ Â¡Torneo Completado!"}),(0,b.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ†"}),(0,b.jsxs)("p",{className:"text-lg mb-2",children:["Aciertos: ",(0,b.jsxs)("strong",{children:[w,"/25"]})]}),(0,b.jsxs)("p",{className:"text-lg mb-2",children:["PuntuaciÃ³n total: ",(0,b.jsxs)("strong",{children:[y," puntos"]})]}),(0,b.jsxs)("p",{className:"text-lg",children:["Promedio: ",(0,b.jsxs)("strong",{children:[(y/25).toFixed(1)," pts/pregunta"]})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-4",children:"Los resultados se procesarÃ¡n automÃ¡ticamente..."})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 p-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 mb-6 text-center",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"ðŸŽ¯ Modo Torneo Premium"}),(0,b.jsxs)("div",{className:"flex justify-center gap-6 text-white",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[A,"/25"]}),(0,b.jsx)("div",{className:"text-sm",children:"Pregunta"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:w}),(0,b.jsx)("div",{className:"text-sm",children:"Aciertos"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:(f=Math.floor(s/60),`${f}:${(s%60).toString().padStart(2,"0")}`)}),(0,b.jsx)("div",{className:"text-sm",children:"Tiempo"})]})]})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-xl p-8",children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:g}),i&&i.imagen&&(0,b.jsx)("div",{className:"mb-4 flex justify-center",children:(0,b.jsx)("img",{src:i.imagen,alt:"Pregunta",className:"max-w-full h-auto max-h-64 rounded-lg"})})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("input",{type:"text",value:m,onChange:a=>n(a.target.value),onKeyPress:a=>"Enter"===a.key&&E(),placeholder:"Escribe tu respuesta aquÃ­...",className:"w-full p-4 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:u})}),(0,b.jsx)("div",{className:"flex gap-4",children:u?(0,b.jsx)("button",{onClick:()=>D(),className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors",children:q.length>=25?"Finalizar Torneo":"Siguiente Pregunta"}):(0,b.jsx)("button",{onClick:E,disabled:!m.trim(),className:"flex-1 bg-purple-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-purple-700 disabled:bg-gray-400 transition-colors",children:"Verificar Respuesta"})}),o&&(0,b.jsx)("div",{className:`mt-4 p-4 rounded-lg text-center font-semibold ${o.includes("âœ…")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o})]}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"ðŸŽ¯"}),(0,b.jsx)("p",{className:"text-xl",children:"Cargando torneo..."})]})})]})})};function f(){let f,g,[h,i]=c.default.useState(!1),[j,k]=c.default.useState(!1),[l,m]=c.default.useState(!1),[n,o]=c.default.useState(!1),[p,q]=c.default.useState(!1),[r,s]=c.default.useState(null),[t,u]=c.default.useState(1),[v,w]=c.default.useState(""),[x,y]=c.default.useState((g=(f=new Date).getFullYear(),f.getMonth()+1<10?g-1:g)),[z,A]=c.default.useState(null),[B,C]=c.default.useState("1Âº Primaria"),[D,E]=c.default.useState("MatemÃ¡ticas"),[F,G]=c.default.useState(""),[H,I]=c.default.useState(null),[J,K]=c.default.useState(""),[L,M]=c.default.useState(""),[N,O]=c.default.useState(""),[P,Q]=c.default.useState(300),[R,S]=c.default.useState(!1);c.default.useEffect(()=>{},[]),c.default.useEffect(()=>{if(!F||R)return;if(0===P){S(!0),O("â° Tiempo agotado. No puedes responder esta pregunta. -2 likes");return}let a=setTimeout(()=>Q(P-1),1e3);return()=>clearTimeout(a)},[P,F,R]);let T=c.default.useMemo(()=>{let b=1;if(B){let a=B.match(/(\d+)/);a&&(b=Number(a[1]))}let c=[];for(let d of["matematicas","lenguaje","literatura","historia","geografia","naturaleza","ingles","general","campeonato"])try{let e=a.f({"../../questions/matematicas-1primaria.json":{id:()=>21199,module:()=>a.r(21199)},"../../questions/lenguaje-1primaria.json":{id:()=>27233,module:()=>a.r(27233)},"../../questions/literatura-1primaria.json":{id:()=>51575,module:()=>a.r(51575)},"../../questions/historia-1primaria.json":{id:()=>46261,module:()=>a.r(46261)},"../../questions/geografia-1primaria.json":{id:()=>82025,module:()=>a.r(82025)},"../../questions/naturaleza-1primaria.json":{id:()=>23120,module:()=>a.r(23120)},"../../questions/ingles-1primaria.json":{id:()=>70172,module:()=>a.r(70172)},"../../questions/general-1primaria.json":{id:()=>83772,module:()=>a.r(83772)},"../../questions/campeonato-1primaria.json":{id:()=>5251,module:()=>a.r(5251)},"../../questions/matematicas-2primaria.json":{id:()=>67799,module:()=>a.r(67799)},"../../questions/matematicas-3primaria.json":{id:()=>21257,module:()=>a.r(21257)},"../../questions/matematicas-4primaria.json":{id:()=>72020,module:()=>a.r(72020)},"../../questions/matematicas-5primaria.json":{id:()=>14860,module:()=>a.r(14860)},"../../questions/matematicas-6primaria.json":{id:()=>70144,module:()=>a.r(70144)},"../../questions/lenguaje-2primaria.json":{id:()=>37978,module:()=>a.r(37978)},"../../questions/lenguaje-3primaria.json":{id:()=>57015,module:()=>a.r(57015)},"../../questions/lenguaje-4primaria.json":{id:()=>69654,module:()=>a.r(69654)},"../../questions/lenguaje-5primaria.json":{id:()=>8154,module:()=>a.r(8154)},"../../questions/lenguaje-6primaria.json":{id:()=>37629,module:()=>a.r(37629)},"../../questions/literatura-2primaria.json":{id:()=>20023,module:()=>a.r(20023)},"../../questions/literatura-3primaria.json":{id:()=>53193,module:()=>a.r(53193)},"../../questions/literatura-4primaria.json":{id:()=>23792,module:()=>a.r(23792)},"../../questions/literatura-5primaria.json":{id:()=>74722,module:()=>a.r(74722)},"../../questions/literatura-6primaria.json":{id:()=>33449,module:()=>a.r(33449)},"../../questions/historia-2primaria.json":{id:()=>34709,module:()=>a.r(34709)},"../../questions/historia-3primaria.json":{id:()=>23680,module:()=>a.r(23680)},"../../questions/historia-4primaria.json":{id:()=>64972,module:()=>a.r(64972)},"../../questions/historia-5primaria.json":{id:()=>83935,module:()=>a.r(83935)},"../../questions/historia-6primaria.json":{id:()=>91854,module:()=>a.r(91854)},"../../questions/geografia-2primaria.json":{id:()=>90537,module:()=>a.r(90537)},"../../questions/geografia-3primaria.json":{id:()=>29241,module:()=>a.r(29241)},"../../questions/geografia-4primaria.json":{id:()=>53988,module:()=>a.r(53988)},"../../questions/geografia-5primaria.json":{id:()=>4473,module:()=>a.r(4473)},"../../questions/geografia-6primaria.json":{id:()=>3058,module:()=>a.r(3058)},"../../questions/naturaleza-2primaria.json":{id:()=>55129,module:()=>a.r(55129)},"../../questions/naturaleza-3primaria.json":{id:()=>75042,module:()=>a.r(75042)},"../../questions/naturaleza-4primaria.json":{id:()=>88552,module:()=>a.r(88552)},"../../questions/naturaleza-5primaria.json":{id:()=>90648,module:()=>a.r(90648)},"../../questions/naturaleza-6primaria.json":{id:()=>96073,module:()=>a.r(96073)},"../../questions/ingles-2primaria.json":{id:()=>17176,module:()=>a.r(17176)},"../../questions/ingles-3primaria.json":{id:()=>66252,module:()=>a.r(66252)},"../../questions/ingles-4primaria.json":{id:()=>8874,module:()=>a.r(8874)},"../../questions/ingles-5primaria.json":{id:()=>54850,module:()=>a.r(54850)},"../../questions/ingles-6primaria.json":{id:()=>5802,module:()=>a.r(5802)},"../../questions/general-2primaria.json":{id:()=>13725,module:()=>a.r(13725)},"../../questions/general-3primaria.json":{id:()=>98958,module:()=>a.r(98958)},"../../questions/general-4primaria.json":{id:()=>83846,module:()=>a.r(83846)},"../../questions/general-5primaria.json":{id:()=>60450,module:()=>a.r(60450)},"../../questions/general-6primaria.json":{id:()=>31390,module:()=>a.r(31390)},"../../questions/campeonato-2primaria.json":{id:()=>31668,module:()=>a.r(31668)},"../../questions/campeonato-3primaria.json":{id:()=>85700,module:()=>a.r(85700)},"../../questions/campeonato-4primaria.json":{id:()=>8433,module:()=>a.r(8433)},"../../questions/campeonato-5primaria.json":{id:()=>59447,module:()=>a.r(59447)},"../../questions/campeonato-6primaria.json":{id:()=>6959,module:()=>a.r(6959)}})(`../../questions/${d}-${b}primaria.json`);c=c.concat(e)}catch{}return c},[B]),U=c.default.useMemo(()=>"General"===D?T:T.filter(a=>a.categoria===D),[T,D]),[V,W]=c.default.useState([]);return(Object.entries({}).map(([a,c])=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"border p-2",children:a}),(0,b.jsx)("td",{className:"border p-2",children:c})]},a)),l)?(0,b.jsx)(e,{userGrade:parseInt(B)||1,onTournamentComplete:(a,b)=>{if(r&&z){fetch("/api/estadisticas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nick:z.nick,tipo:"competiciones_premium_participaciones",puntos:1})}).catch(console.error),fetch("/api/estadisticas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nick:z.nick,tipo:"competiciones_premium_puntuacion",puntos:b})}).catch(console.error);let c=localStorage.getItem("torneos_premium");if(c){let d=JSON.parse(c).map(c=>{if(c.id===r.torneoId){let d=c.resultados||[];return d.push({nick:z.nick,aciertos:a,puntuacion:b}),d.sort((a,b)=>b.puntuacion-a.puntuacion),c.id.includes("torneo-mensual")&&d[0].nick===z.nick&&fetch("/api/estadisticas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nick:z.nick,tipo:"competiciones_premium_victorias",puntos:1})}).catch(console.error),fetch("/api/torneos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:c.id,resultados:d,estado:new Date>=new Date(c.fechaFin)?"finalizado":c.estado,ganador:d.length>0?d[0].nick:void 0})}).catch(console.error),{...c,resultados:d,estado:new Date>=new Date(c.fechaFin)?"finalizado":c.estado,ganador:d.length>0?d[0].nick:void 0}}return c});localStorage.setItem("torneos_premium",JSON.stringify(d))}localStorage.removeItem("torneo_activo_premium"),alert(`\xa1Torneo completado!

Aciertos: ${a}/25
Puntuaci\xf3n total: ${b} puntos

Los resultados se han guardado. \xa1Buen trabajo!`),window.location.href="/torneos-premium"}}}):(0,b.jsxs)("div",{className:"min-h-screen bg-green-100 p-8 flex flex-col items-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center",children:"Aprende con Pipo"}),(0,b.jsxs)("div",{className:"flex items-stretch mx-auto",style:{transform:"translateX(-80px)"},children:[(0,b.jsx)("img",{src:"/trofeo16.jpg",alt:"Trofeo 16",className:"h-40 object-contain mr-4"}),(0,b.jsx)("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-md p-8 flex flex-col gap-6 mx-auto",children:h?(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)(d.default,{userGrade:t,userSchool:v}),(0,b.jsx)("button",{className:"bg-gray-500 text-white px-4 py-2 rounded mt-4",onClick:()=>i(!1),children:"Salir de competiciÃ³n"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-4 rounded-lg border-2 border-blue-200 mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-blue-800 mb-2",children:"ðŸ›¡ï¸ Sistema Anti-Trampa Activo"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold text-blue-700",children:"ðŸ‘¤ Usuario:"}),(0,b.jsx)("span",{className:"ml-2 text-gray-800",children:z?.nick||"No detectado"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold text-blue-700",children:"ðŸŽ“ Curso detectado:"}),(0,b.jsx)("span",{className:"ml-2 text-gray-800 font-semibold",children:B})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold text-blue-700",children:"ðŸ« Centro:"}),(0,b.jsx)("span",{className:"ml-2 text-gray-800",children:z?.centro||"No asignado"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold text-blue-700",children:"ðŸ‘¥ Tipo:"}),(0,b.jsx)("span",{className:"ml-2 text-gray-800",children:z?.esProfesor||z?.tipo==="docente"||z?.tipo==="Docente"?"Docente":"Estudiante"})]})]}),(0,b.jsxs)("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[(0,b.jsxs)("p",{className:"text-xs text-yellow-800",children:["ðŸ”’ ",(0,b.jsx)("strong",{children:"Solo podrÃ¡s responder preguntas de tu nivel"})," para garantizar puntuaciones justas."]}),(z?.esProfesor||z?.tipo==="docente"||z?.tipo==="Docente")&&(0,b.jsxs)("p",{className:"text-xs text-orange-800 mt-2",children:["ðŸ‘©â€ðŸ« ",(0,b.jsx)("strong",{children:"Modo Docente:"})," Preguntas de 6Âº curso y puntuaciÃ³n reducida al 50% para equilibrar la dificultad."]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-center",children:[(0,b.jsx)("label",{className:"font-semibold",children:"Asignatura:"}),(0,b.jsx)("select",{className:"border rounded px-2 py-1",value:D,onChange:a=>E(a.target.value),children:["Naturaleza","MatemÃ¡ticas","Lenguaje","Literatura","InglÃ©s","GeografÃ­a","Historia","General","Campeonato"].map(a=>(0,b.jsx)("option",{value:a,children:a},a))}),(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["(Curso fijo: ",(0,b.jsx)("strong",{children:B}),")"]})]}),(0,b.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded mt-4",onClick:function(){if(0===U.length){G(""),I(null),K(""),O("No hay preguntas para esta asignatura."),S(!1),Q(300),W([]);return}let a=U.filter(a=>!V.includes(a.pregunta));if(0===a.length){G(""),I(null),K(""),O("Â¡Has respondido todas las preguntas disponibles!"),S(!0),Q(300),W([]);return}let b=Math.floor(Math.random()*a.length),c=a[b];G(c.pregunta),I(c),K(c.respuesta),M(""),O(""),S(!1),Q(300),W([...V,c.pregunta])},children:"Generar pregunta"}),(0,b.jsx)("button",{className:"bg-orange-500 text-white px-4 py-2 rounded mt-4 self-center",onClick:()=>{i(!0),u(1),w("")},children:"Modo competiciÃ³n"}),n&&(0,b.jsx)("button",{className:"bg-purple-500 text-white px-4 py-2 rounded mt-4 self-center",onClick:()=>{m(!0)},children:"Modo torneo"}),F&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("div",{className:"font-semibold mb-2",children:F}),(0,b.jsxs)("div",{className:"font-bold text-lg mb-2",children:["â° Tiempo: ",Math.floor(P/60),":",(P%60).toString().padStart(2,"0")," min"]}),(0,b.jsx)("input",{type:"text",className:"border rounded px-2 py-1 w-full mb-2",value:L,onChange:a=>M(a.target.value),placeholder:"Escribe tu respuesta aquÃ­",disabled:R}),(0,b.jsx)("button",{className:"bg-green-500 text-white px-4 py-2 rounded",onClick:function(){if(R)return;let a=z?.esProfesor||z?.tipo==="docente"||z?.tipo==="Docente",b=a?.5:1;function c(a){return a.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/\s+/g,"").trim()}let d=c(L)===c(J);if(S(!0),d)if(P>120){let c=+b;O(`\xa1Correcto! ðŸŽ‰ +${c} like${1!==c?"s":""}${a?" (Docente: 50% puntos)":""}`)}else O(`\xa1Correcto! ðŸŽ‰ +${.5*b} likes${a?" (Docente: 50% puntos)":""}`);else if(P>120)O(`Incorrecto. La respuesta era: ${J} ${-.5*b} likes${a?" (Docente: 50% puntos)":""}`);else{let c=-1*b;O(`Incorrecto. La respuesta era: ${J} ${c} like${1!==Math.abs(c)?"s":""}${a?" (Docente: 50% puntos)":""}`)}},disabled:R,children:"Comprobar respuesta"}),N&&(0,b.jsx)("div",{className:"mt-2 font-bold",children:N})]}),N&&!F&&(0,b.jsx)("div",{className:"mt-2 font-bold text-red-600",children:N})]})}),(0,b.jsx)("img",{src:"/logo-pipo.jpg",alt:"Logo Pipo",className:"h-40 object-contain ml-4"})]})]})}a.s(["default",()=>f],31894)}];

//# sourceMappingURL=src_app_aprende-con-pipo_page_tsx_e827a85e._.js.map