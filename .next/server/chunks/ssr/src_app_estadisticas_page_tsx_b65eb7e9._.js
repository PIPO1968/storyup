module.exports=[96239,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(57259),e=a.i(44355);class f{static async getCampeonatos(a,b){let c=new URLSearchParams;a&&c.append("temporada",a.toString()),b&&c.append("tipo",b);let d=`/api/campeonatos?${c.toString()}`,e=await fetch(d);if(!e.ok)throw Error("Error al obtener campeonatos");return e.json()}static async createCampeonato(a){let b=await fetch("/api/campeonatos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("Error al crear campeonato");return b.json()}static async updateCampeonato(a,b){let c=await fetch("/api/campeonatos",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a,datos:b})});if(!c.ok)throw Error("Error al actualizar campeonato");return c.json()}}function g(){let a,g,h,i,j,k,l,m,n,o,p,q,r,s,t,{t:u}=(0,e.useTranslation)(),[v,w]=c.default.useState(!1),[x,y]=c.default.useState(null);function z(a){if(!a||!a.nick)return 0;let b=0;for(let c of["matematicas","lenguaje","geografia","historia","literatura","ingles","naturaleza"])b+=parseInt((a[c]||0).toString(),10);return b+=a.likes||0,b+=10*(a.competicionesSuperadas||0),b+=2*(a.preguntasAcertadas||0)}function A(){let a=new Date,b=a.getFullYear();return a.getMonth()+1<10?b-1:b}let[B,C]=c.default.useState(A()),[D,E]=c.default.useState([]),[F,G]=c.default.useState({}),[H,I]=c.default.useState({}),[J,K]=c.default.useState({}),[L,M]=c.default.useState(!1),[N,O]=c.default.useState([]),[P,Q]=c.default.useState(!1),[R,S]=c.default.useState(0),[T,U]=c.default.useState(0),[V,W]=c.default.useState(0),[X,Y]=c.default.useState(0),[Z,$]=c.default.useState(0),[_,aa]=c.default.useState(0),[ab,ac]=c.default.useState(0),[ad,ae]=c.default.useState(0),[af,ag]=c.default.useState([]),[ah,ai]=c.default.useState([]);function aj({nick:a}){return(0,d.renderNick)(a)}return c.default.useEffect(()=>{function a(){E(a=>[...a]),G(a=>({...a})),I(a=>({...a})),K(a=>({...a})),O(a=>[...a]),Q(a=>a)}return M(!0),window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}},[]),c.default.useEffect(()=>{(async()=>{let a=[];try{let b=await f.getCampeonatos(),c=new Set(b.map(a=>a.temporada));a.push(...Array.from(c)),a.includes(A())||a.push(A())}catch{for(let b=2023;b<=A();b++)a.push(b)}E(a.sort((a,b)=>b-a))})()},[]),c.default.useEffect(()=>{},[B]),c.default.useEffect(()=>{},[B]),c.default.useEffect(()=>{},[]),(0,b.jsxs)("div",{className:"min-h-screen bg-green-100 p-8",children:[(0,b.jsx)("div",{className:"text-center mb-4",children:(0,b.jsx)("h1",{className:"text-2xl font-bold",children:v?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-yellow-600",children:u("estadisticasPremium")}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Â¡Hola ",x?.nick,"! Disfrutas de estadÃ­sticas avanzadas"]})]}):(0,b.jsxs)(b.Fragment,{children:["EstadÃ­sticas",(0,b.jsx)("div",{className:"text-sm text-blue-600 mt-1",children:(0,b.jsxs)("button",{onClick:()=>window.location.href="/premium-nuevo",className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs hover:shadow-lg transform hover:scale-105 transition-all",children:["âœ¨ ",u("haztePremiumParaVer")," âœ¨"]})})]})})}),L&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:u("estadisticasGlobales")}),(0,b.jsxs)("ul",{className:"space-y-2",children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,b.jsxs)("b",{children:[u("totalCompeticionesSuperadas"),":"]})," ",R]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ‘¥"}),(0,b.jsxs)("b",{children:[u("totalUsuarios"),":"]})," ",T]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ“–"}),(0,b.jsxs)("b",{children:[u("totalHistoriasCreadas"),":"]})," ",V]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,b.jsxs)("b",{children:[u("totalConcursosCreados"),":"]})," ",X]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ’¬"}),(0,b.jsx)("b",{children:"Total de comentarios realizados:"})," ",(a=0,af.forEach(b=>{a+=b.comentarios?b.comentarios.length:0}),a)]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ«"}),(0,b.jsx)("b",{children:"Total de centros escolares registrados:"})," ",new Set(ah.map(a=>a.centro).filter(Boolean)).size]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ‘¨â€ðŸ«"}),(0,b.jsx)("b",{children:"Total de docentes registrados:"})," ",Z]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ¤"}),(0,b.jsx)("b",{children:"Total de amigos creados:"})," ",_]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ…"}),(0,b.jsx)("b",{children:"Total de historias ganadoras:"})," ",ab]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦"}),(0,b.jsx)("b",{children:"Total de participantes en concursos:"})," ",ad]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"â¤ï¸"}),(0,b.jsx)("b",{children:"Total de likes:"})," ",(g=0,ah.forEach(a=>{g+=a.likes||0}),g)]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"â“"}),(0,b.jsx)("b",{children:"Total de preguntas respondidas:"})," ",(h=0,i=0,ah.forEach(a=>{h+=a.preguntasAcertadas||0,i+=a.preguntasFalladas||0}),h+i)]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"â“"}),(0,b.jsxs)("b",{children:[u("totalPreguntasAcertadas"),":"]})," ",(j=0,ah.forEach(a=>{j+=a.preguntasAcertadas||0}),j)]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"â“"}),(0,b.jsx)("b",{children:"Total de preguntas falladas:"})," ",(k=0,ah.forEach(a=>{k+=a.preguntasFalladas||0}),k)]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,b.jsx)("b",{children:"Total de concursos ganados:"})," ",(l=0,ah.forEach(a=>{l+=a.concursosGanados||0}),l)]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:"Rankings"}),(0,b.jsxs)("ul",{className:"space-y-2",children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"â¤ï¸"}),(0,b.jsxs)("b",{children:[u("usuariosMasLikes"),":"]})," ",0===(m=ah.map(a=>({nick:a.nick,nombre:a.nombre,totalLikes:a.likes||0})).filter(a=>a.nick&&a.totalLikes>0).sort((a,b)=>b.totalLikes-a.totalLikes).slice(0,5)).length?(0,b.jsx)("span",{className:"block",children:"No hay usuarios con likes."}):m.map((a,c)=>(0,b.jsxs)("span",{className:"block",children:[c+1,". ",(0,b.jsx)("b",{children:(0,b.jsx)(aj,{nick:a.nick})})," (",a.totalLikes," likes)"]},a.nick))]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ’¬"}),(0,b.jsxs)("b",{children:[u("usuariosMasComentarios"),":"]})," ",(n={},af.forEach(a=>{a.autor&&(n[a.autor]=(n[a.autor]||0)+(a.comentarios?a.comentarios.length:0))}),0===(o=Object.entries(n).map(([a,b])=>({nick:a,totalComentarios:b})).filter(a=>a.nick&&a.totalComentarios>0).sort((a,b)=>b.totalComentarios-a.totalComentarios).slice(0,5)).length?(0,b.jsx)("span",{className:"block",children:"No hay usuarios con comentarios aÃºn."}):o.map((a,c)=>(0,b.jsxs)("span",{className:"block",children:[c+1,". ",(0,b.jsx)("b",{children:(0,b.jsx)(aj,{nick:a.nick})})," (",a.totalComentarios," comentarios)"]},a.nick)))]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ¤"}),(0,b.jsx)("b",{children:"Usuarios con mÃ¡s amigos:"})," ",0===(p=ah.map(a=>{let b=a.amigos?a.amigos.length:0;return{nick:a.nick,numAmigos:b}}).filter(a=>a.nick&&a.numAmigos>0).sort((a,b)=>b.numAmigos-a.numAmigos).slice(0,5)).length?(0,b.jsx)("span",{className:"block",children:"No hay usuarios con amigos aÃºn."}):p.map((a,c)=>(0,b.jsxs)("span",{className:"block",children:[c+1,". ",(0,b.jsx)("b",{children:(0,b.jsx)(aj,{nick:a.nick})})," (",a.numAmigos," amigos)"]},a.nick))]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ“–"}),(0,b.jsx)("b",{children:"Usuarios con mÃ¡s historias:"})," ",(q={},af.forEach(a=>{a.autor&&(q[a.autor]=(q[a.autor]||0)+1)}),0===(r=Object.entries(q).map(([a,b])=>({nick:a,totalHistorias:b})).filter(a=>a.nick&&a.totalHistorias>0).sort((a,b)=>b.totalHistorias-a.totalHistorias).slice(0,5)).length?(0,b.jsx)("span",{className:"block",children:"No hay usuarios con historias aÃºn."}):r.map((a,c)=>(0,b.jsxs)("span",{className:"block",children:[c+1,". ",(0,b.jsx)("b",{children:(0,b.jsx)(aj,{nick:a.nick})})," (",a.totalHistorias," historias)"]},a.nick)))]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,b.jsx)("b",{children:"Usuarios con mÃ¡s concursos ganados:"})," ",0===(s=ah.map(a=>({nick:a.nick,nombre:a.nombre,totalConcursos:a.concursosGanados||0})).filter(a=>a.totalConcursos>0).sort((a,b)=>b.totalConcursos-a.totalConcursos).slice(0,5)).length?(0,b.jsx)("span",{className:"block",children:"No hay usuarios con concursos ganados aÃºn."}):s.map((a,c)=>(0,b.jsxs)("span",{className:"block",children:[c+1,". ",(0,b.jsx)("b",{children:(0,b.jsx)(aj,{nick:a.nick})})," (",a.totalConcursos," concursos)"]},a.nick))]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,b.jsx)("b",{children:"Usuarios con mÃ¡s competiciones superadas:"})," ",0===(t=ah.map(a=>({nick:a.nick,nombre:a.nombre,totalCompeticiones:a.competicionesSuperadas||0})).filter(a=>a.totalCompeticiones>0).sort((a,b)=>b.totalCompeticiones-a.totalCompeticiones).slice(0,5)).length?(0,b.jsx)("span",{className:"block",children:"No hay usuarios con competiciones superadas aÃºn."}):t.map((a,c)=>(0,b.jsxs)("span",{className:"block",children:[c+1,". ",(0,b.jsx)("b",{children:(0,b.jsx)(aj,{nick:a.nick})})," (",a.totalCompeticiones," competiciones)"]},a.nick))]})]})]})]}),v&&(0,b.jsx)("div",{className:"max-w-5xl mx-auto mt-8",children:(0,b.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 rounded-2xl p-1 shadow-2xl",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-600",children:"ðŸ‘‘ EstadÃ­sticas Premium Avanzadas ðŸ‘‘"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-4",children:[(0,b.jsx)("h3",{className:"font-bold text-blue-800 mb-3 text-center",children:"ðŸ“ˆ Tu AnÃ¡lisis Personal"}),(0,b.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸŽ¯ PrecisiÃ³n promedio:"}),(0,b.jsx)("span",{className:"font-bold text-blue-600",children:(()=>{if(x){let a=x.preguntasAcertadas||0,b=a+(x.preguntasFalladas||0);return b>0?(a/b*100).toFixed(1)+"%":"0%"}return"0%"})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"âš¡ Racha actual:"}),(0,b.jsxs)("span",{className:"font-bold text-blue-600",children:[x?.racha||0," dÃ­as"]})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸ“… DÃ­as activo:"}),(0,b.jsx)("span",{className:"font-bold text-blue-600",children:(()=>{if(x?.fechaRegistro){let a=new Date(x.fechaRegistro);return Math.ceil(Math.abs(new Date().getTime()-a.getTime())/864e5)}return 0})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸ† Tu ranking:"}),(0,b.jsx)("span",{className:"font-bold text-blue-600",children:(()=>{if(x&&ah.length>0){let a=ah.map(a=>({...a,puntosTotales:z(a)})).sort((a,b)=>b.puntosTotales-a.puntosTotales).findIndex(a=>a.nick===x.nick)+1;return a>0?`#${a}`:"-"}return"-"})()})]})]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-4",children:[(0,b.jsx)("h3",{className:"font-bold text-green-800 mb-3 text-center",children:"ðŸ“š AnÃ¡lisis por Materias"}),(0,b.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸ”¬ MatemÃ¡ticas:"}),(0,b.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(x){let a=Math.floor((x.estadisticas&&x.estadisticas.matematicas||0)/5)+1;return`Nivel ${a}`}return"Nivel 1"})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸ“– Lenguaje:"}),(0,b.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(x){let a=Math.floor((x.estadisticas&&x.estadisticas.lenguaje||0)/5)+1;return`Nivel ${a}`}return"Nivel 1"})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸŒ GeografÃ­a:"}),(0,b.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(x){let a=Math.floor((x.estadisticas&&x.estadisticas.geografia||0)/5)+1;return`Nivel ${a}`}return"Nivel 1"})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸ“š Historia:"}),(0,b.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(x){let a=Math.floor((x.estadisticas&&x.estadisticas.historia||0)/5)+1;return`Nivel ${a}`}return"Nivel 1"})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸŽ¨ Tu fuerte:"}),(0,b.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(x){let a=[{nombre:"MatemÃ¡ticas",puntos:x.estadisticas&&x.estadisticas.matematicas||0},{nombre:"Lenguaje",puntos:x.estadisticas&&x.estadisticas.lenguaje||0},{nombre:"GeografÃ­a",puntos:x.estadisticas&&x.estadisticas.geografia||0},{nombre:"Historia",puntos:x.estadisticas&&x.estadisticas.historia||0},{nombre:"Literatura",puntos:x.estadisticas&&x.estadisticas.literatura||0},{nombre:"InglÃ©s",puntos:x.estadisticas&&x.estadisticas.ingles||0},{nombre:"Naturaleza",puntos:x.estadisticas&&x.estadisticas.naturaleza||0}].reduce((a,b)=>b.puntos>a.puntos?b:a);return a.puntos>0?a.nombre:"Ninguna aÃºn"}return"Ninguna aÃºn"})()})]})]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-violet-100 rounded-xl p-4",children:[(0,b.jsx)("h3",{className:"font-bold text-purple-800 mb-3 text-center",children:"ðŸŽ¯ Logros y ProyecciÃ³n"}),(0,b.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸ“ˆ Crecimiento:"}),(0,b.jsx)("span",{className:"font-bold text-purple-600",children:(()=>{if(x){let a=x.preguntasAcertadas||0,b=a+(x.preguntasFalladas||0);if(b>0){let c=Math.max(0,Math.floor(a/b*100-50));return`+${c}% sem.`}}return"+0% sem."})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸŽ¯ Meta semanal:"}),(0,b.jsx)("span",{className:"font-bold text-purple-600",children:(()=>{if(x){let a=x.preguntasAcertadas||0,b=a+(x.preguntasFalladas||0);if(b>0){let c=a/b*100;return c>=75?"75% âœ…":`${c.toFixed(1)}% âŒ`}}return"0% âŒ"})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"â­ PrÃ³ximo nivel:"}),(0,b.jsx)("span",{className:"font-bold text-purple-600",children:(()=>{if(x){let a=z(x),b=Math.floor(a/100);return`${(b+1)*100-a} pts`}return"100 pts"})()})]})]})]})]}),(0,b.jsxs)("div",{className:"mt-6 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4",children:[(0,b.jsx)("h3",{className:"font-bold text-indigo-800 mb-3 text-center",children:"ðŸ“Š GrÃ¡fico de Progreso Semanal"}),(0,b.jsx)("div",{className:"flex items-end justify-between h-32 gap-2",children:[...Array(7)].map((a,c)=>{let d=x?Math.max(0,Math.floor(((x.preguntasAcertadas||0)+(x.preguntasFalladas||0))/7)+(Math.floor(5*Math.random())-2)):Math.floor(5*Math.random())+1,e=Math.max(20,Math.min(100,d/25*80+20)),f=["L","M","X","J","V","S","D"][c],g=c===new Date().getDay()-1||0===new Date().getDay()&&6===c;return(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:`w-8 rounded-t-md ${g?"bg-gradient-to-t from-orange-500 to-red-500":"bg-gradient-to-t from-blue-500 to-purple-500"}`,style:{height:`${e}%`}}),(0,b.jsx)("span",{className:`text-xs mt-1 font-semibold ${g?"text-orange-600":"text-indigo-600"}`,children:f}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:d})]},c)})}),(0,b.jsxs)("div",{className:"text-center mt-3 text-sm text-indigo-600",children:["ðŸ“ˆ ",(0,b.jsx)("strong",{children:"Tendencia:"})," ",(()=>{if(x){let a=x.preguntasAcertadas||0,b=x.preguntasFalladas||0,c=b+a>0?a/(b+a)*100:0;return c>=80?"Â¡Excelente! MantÃ©n este nivel de precisiÃ³n.":c>=60?"Â¡Vas muy bien! MantÃ©n el ritmo esta semana.":c>=40?"Buen progreso. Â¡Sigue practicando!":"Empezando bien. Â¡Cada respuesta cuenta!"}return"Â¡Empieza tu aventura de aprendizaje!"})()]})]}),(0,b.jsxs)("div",{className:"mt-6 bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4",children:[(0,b.jsx)("h3",{className:"font-bold text-orange-800 mb-3 text-center",children:"âš”ï¸ Tu PosiciÃ³n vs. Mejores"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,b.jsx)("div",{className:"text-2xl",children:"ðŸ¥‡"}),(0,b.jsx)("div",{className:"text-xs text-gray-600",children:"1Âº Lugar"}),(0,b.jsx)("div",{className:"font-bold text-yellow-600",children:(()=>{if(ah.length>0){let a=ah.map(a=>({...a,puntosTotales:z(a)})).sort((a,b)=>b.puntosTotales-a.puntosTotales);return a[0]?.puntosTotales||0}return 0})()}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:(()=>{if(ah.length>0){let a=ah.map(a=>({...a,puntosTotales:z(a)})).sort((a,b)=>b.puntosTotales-a.puntosTotales);return a[0]?.nick||"Nadie"}return"Nadie"})()})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg p-3 border-2 border-blue-300",children:[(0,b.jsx)("div",{className:"text-2xl",children:"ðŸ‘‘"}),(0,b.jsx)("div",{className:"text-xs text-blue-600 font-bold",children:"TÃš"}),(0,b.jsx)("div",{className:"font-bold text-blue-600",children:x?z(x):0}),(0,b.jsx)("div",{className:"text-xs text-blue-500",children:(()=>{if(x&&ah.length>0){let a=ah.map(a=>({...a,puntosTotales:z(a)})).sort((a,b)=>b.puntosTotales-a.puntosTotales).findIndex(a=>a.nick===x.nick)+1;return a>0?`Posici\xf3n #${a}`:"Sin clasificar"}return"Sin clasificar"})()})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,b.jsx)("div",{className:"text-2xl",children:"ðŸŽ¯"}),(0,b.jsx)("div",{className:"text-xs text-gray-600",children:"Promedio"}),(0,b.jsx)("div",{className:"font-bold text-gray-600",children:ah.length>0?Math.floor(ah.reduce((a,b)=>a+z(b),0)/ah.length):0}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:`${ah.length} usuarios`})]})]}),(0,b.jsx)("div",{className:"mt-3 text-center text-sm",children:(()=>{if(x&&ah.length>0){let a=Math.floor(ah.reduce((a,b)=>a+z(b),0)/ah.length),c=z(x)-a;return c>0?(0,b.jsxs)("span",{className:"text-green-600",children:["ðŸ“ˆ +",c," puntos sobre el promedio"]}):c<0?(0,b.jsxs)("span",{className:"text-red-600",children:["ðŸ“‰ ",Math.abs(c)," puntos bajo el promedio"]}):(0,b.jsx)("span",{className:"text-blue-600",children:"ðŸŽ¯ Exactamente en el promedio"})}return(0,b.jsx)("span",{className:"text-gray-500",children:"Sin datos para comparar"})})()})]})]})})}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-5xl mx-auto mt-8",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mejores estadÃ­sticas"}),(0,b.jsxs)("ul",{className:"space-y-2 text-center",children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ“–"}),(0,b.jsx)("b",{children:"Historia con mÃ¡s likes:"})," ",(()=>{if(0===af.length)return"-";let a=af.reduce((a,b)=>(b.likes||0)>(a.likes||0)?b:a,af[0]);return(0,b.jsxs)("span",{children:[(0,b.jsx)("b",{children:a.titulo})," por ",(0,b.jsx)("b",{children:(0,b.jsx)(aj,{nick:a.autor})})," ",(0,b.jsxs)("span",{className:"text-pink-600",children:["â¤ï¸ ",a.likes||0]})]})})()]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ’¬"}),(0,b.jsx)("b",{children:"Historia mÃ¡s comentada:"})," ",(()=>{if(0===af.length)return"-";let a=af.reduce((a,b)=>(b.comentarios?b.comentarios.length:0)>(a.comentarios?a.comentarios.length:0)?b:a,af[0]);return(0,b.jsxs)("span",{children:[(0,b.jsx)("b",{children:a.titulo})," por ",(0,b.jsx)("b",{children:(0,b.jsx)(aj,{nick:a.autor})})," ",(0,b.jsxs)("span",{className:"text-blue-600",children:["ðŸ’¬ ",a.comentarios?a.comentarios.length:0]})]})})()]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ«"}),(0,b.jsx)("b",{children:"Centro con mÃ¡s historias creadas:"})," ",(()=>{if(0===af.length||0===ah.length)return"-";let a={};ah.forEach(b=>{b.nick&&b.centro&&(a[b.nick]=b.centro)});let c={};af.forEach(b=>{let d=b.centro||a[b.autor]||null;d&&(c[d]=(c[d]||0)+1)});let d=Object.entries(c).sort((a,b)=>b[1]-a[1])[0];return d?(0,b.jsxs)("span",{children:[(0,b.jsx)("b",{children:d[0]})," ",(0,b.jsxs)("span",{className:"text-purple-600",children:["ðŸ« ",d[1]]})]}):"-"})()]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ«"}),(0,b.jsx)("b",{children:"Centro Escolar con mÃ¡s usuarios activos:"})," ",(()=>{if(0===ah.length)return"-";let a={};ah.forEach(b=>{b.centro&&(a[b.centro]=(a[b.centro]||0)+1)});let c=Object.entries(a).sort((a,b)=>b[1]-a[1])[0];return c?(0,b.jsxs)("span",{children:[(0,b.jsx)("b",{children:c[0]})," ",(0,b.jsxs)("span",{className:"text-blue-600",children:["ðŸ« ",c[1]]})]}):"-"})()]})]})]})]})]})}a.i(86085),a.i(6292),a.i(45350),a.s(["default",()=>g],96239)}];

//# sourceMappingURL=src_app_estadisticas_page_tsx_b65eb7e9._.js.map