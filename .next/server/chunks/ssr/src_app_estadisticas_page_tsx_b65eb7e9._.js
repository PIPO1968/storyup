module.exports=[96239,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(57259);class e{static async getCampeonatos(a,b,c){try{let d=new URLSearchParams;a&&d.append("temporada",a),b&&d.append("tipo",b),c&&d.append("nick",c);let e=await fetch(`/api/campeonatos?${d}`);if(!e.ok)throw Error("Error obteniendo campeonatos");return await e.json()}catch(a){return console.error("Error getting campeonatos:",a),[]}}static async saveCampeonato(a){try{let b=await fetch("/api/campeonatos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("Error guardando campeonato");return await b.json()}catch(a){return console.error("Error saving campeonato:",a),null}}static async updateCampeonato(a){try{let b=await fetch("/api/campeonatos",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("Error actualizando campeonato");return await b.json()}catch(a){return console.error("Error updating campeonato:",a),null}}static async deleteCampeonatos(a,b){try{return(await fetch(`/api/campeonatos?temporada=${a}&tipo=${b}`,{method:"DELETE"})).ok}catch(a){return console.error("Error deleting campeonatos:",a),!1}}}function f(){let a,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=a=>({estadisticasPremium:"EstadÃ­sticas Premium",haztePremiumParaVer:"Hazte Premium para ver",estadisticasGlobales:"EstadÃ­sticas Globales",totalCompeticionesSuperadas:"Total Competiciones Superadas",totalUsuarios:"Total Usuarios",totalHistoriasCreadas:"Total Historias Creadas",totalConcursosCreados:"Total Concursos Creados",totalPreguntasAcertadas:"Total Preguntas Acertadas",usuariosMasLikes:"Usuarios con MÃ¡s Likes",usuariosMasComentarios:"Usuarios con MÃ¡s Comentarios"})[a]||a,[u,v]=c.default.useState(!1),[w,x]=c.default.useState(null);function y(a){if(!a||!a.nick)return 0;let b=0;for(let c of["matematicas","lenguaje","geografia","historia","literatura","ingles","naturaleza"])b+=parseInt((a[c]||0).toString(),10);return b+=a.likes||0,b+=10*(a.competicionesSuperadas||0),b+=2*(a.preguntasAcertadas||0)}function z(){let a=new Date,b=a.getFullYear();return a.getMonth()+1<10?b-1:b}let[A,B]=c.default.useState(z()),[C,D]=c.default.useState([]),[E,F]=c.default.useState({}),[G,H]=c.default.useState({}),[I,J]=c.default.useState({}),[K,L]=c.default.useState(!1),[M,N]=c.default.useState([]),[O,P]=c.default.useState(!1),[Q,R]=c.default.useState(0),[S,T]=c.default.useState(0),[U,V]=c.default.useState(0),[W,X]=c.default.useState(0),[Y,Z]=c.default.useState(0),[$,_]=c.default.useState(0),[aa,ab]=c.default.useState(0),[ac,ad]=c.default.useState(0),[ae,af]=c.default.useState([]),[ag,ah]=c.default.useState([]);function ai({nick:a}){return(0,d.renderNick)(a)}return c.default.useEffect(()=>{function a(){D(a=>[...a]),F(a=>({...a})),H(a=>({...a})),J(a=>({...a})),N(a=>[...a]),P(a=>a)}return L(!0),window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}},[]),c.default.useEffect(()=>{(async()=>{let a=[];try{let b=await e.getCampeonatos(),c=new Set(b.map(a=>parseInt(a.temporada.replace("t",""))));a.push(...Array.from(c)),a.includes(z())||a.push(z())}catch{for(let b=2023;b<=z();b++)a.push(b)}D(a.sort((a,b)=>b-a))})()},[]),c.default.useEffect(()=>{},[A]),c.default.useEffect(()=>{},[A]),c.default.useEffect(()=>{},[]),(0,b.jsxs)("div",{className:"min-h-screen bg-green-100 p-8",children:[(0,b.jsx)("div",{className:"text-center mb-4",children:(0,b.jsx)("h1",{className:"text-2xl font-bold",children:u?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-yellow-600",children:t("estadisticasPremium")}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Â¡Hola ",w?.nick,"! Disfrutas de estadÃ­sticas avanzadas"]})]}):(0,b.jsxs)(b.Fragment,{children:["EstadÃ­sticas",(0,b.jsx)("div",{className:"text-sm text-blue-600 mt-1",children:(0,b.jsxs)("button",{onClick:()=>window.location.href="/premium-nuevo",className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs hover:shadow-lg transform hover:scale-105 transition-all",children:["âœ¨ ",t("haztePremiumParaVer")," âœ¨"]})})]})})}),K&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:t("estadisticasGlobales")}),(0,b.jsxs)("ul",{className:"space-y-2",children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,b.jsxs)("b",{children:[t("totalCompeticionesSuperadas"),":"]})," ",Q]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ‘¥"}),(0,b.jsxs)("b",{children:[t("totalUsuarios"),":"]})," ",S]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ“–"}),(0,b.jsxs)("b",{children:[t("totalHistoriasCreadas"),":"]})," ",U]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,b.jsxs)("b",{children:[t("totalConcursosCreados"),":"]})," ",W]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ’¬"}),(0,b.jsx)("b",{children:"Total de comentarios realizados:"})," ",(a=0,ae.forEach(b=>{a+=b.comentarios?b.comentarios.length:0}),a)]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ«"}),(0,b.jsx)("b",{children:"Total de centros escolares registrados:"})," ",new Set(ag.map(a=>a.centro).filter(Boolean)).size]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ‘¨â€ðŸ«"}),(0,b.jsx)("b",{children:"Total de docentes registrados:"})," ",Y]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ¤"}),(0,b.jsx)("b",{children:"Total de amigos creados:"})," ",$]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ…"}),(0,b.jsx)("b",{children:"Total de historias ganadoras:"})," ",aa]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦"}),(0,b.jsx)("b",{children:"Total de participantes en concursos:"})," ",ac]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"â¤ï¸"}),(0,b.jsx)("b",{children:"Total de likes:"})," ",(f=0,ag.forEach(a=>{f+=a.likes||0}),f)]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"â“"}),(0,b.jsx)("b",{children:"Total de preguntas respondidas:"})," ",(g=0,h=0,ag.forEach(a=>{g+=a.preguntasAcertadas||0,h+=a.preguntasFalladas||0}),g+h)]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"â“"}),(0,b.jsxs)("b",{children:[t("totalPreguntasAcertadas"),":"]})," ",(i=0,ag.forEach(a=>{i+=a.preguntasAcertadas||0}),i)]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"â“"}),(0,b.jsx)("b",{children:"Total de preguntas falladas:"})," ",(j=0,ag.forEach(a=>{j+=a.preguntasFalladas||0}),j)]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,b.jsx)("b",{children:"Total de concursos ganados:"})," ",(k=0,ag.forEach(a=>{k+=a.concursosGanados||0}),k)]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:"Rankings"}),(0,b.jsxs)("ul",{className:"space-y-2",children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"â¤ï¸"}),(0,b.jsxs)("b",{children:[t("usuariosMasLikes"),":"]})," ",0===(l=ag.map(a=>({nick:a.nick,nombre:a.nombre,totalLikes:a.likes||0})).filter(a=>a.nick&&a.totalLikes>0).sort((a,b)=>b.totalLikes-a.totalLikes).slice(0,5)).length?(0,b.jsx)("span",{className:"block",children:"No hay usuarios con likes."}):l.map((a,c)=>(0,b.jsxs)("span",{className:"block",children:[c+1,". ",(0,b.jsx)("b",{children:(0,b.jsx)(ai,{nick:a.nick})})," (",a.totalLikes," likes)"]},a.nick))]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ’¬"}),(0,b.jsxs)("b",{children:[t("usuariosMasComentarios"),":"]})," ",(m={},ae.forEach(a=>{a.autor&&(m[a.autor]=(m[a.autor]||0)+(a.comentarios?a.comentarios.length:0))}),0===(n=Object.entries(m).map(([a,b])=>({nick:a,totalComentarios:b})).filter(a=>a.nick&&a.totalComentarios>0).sort((a,b)=>b.totalComentarios-a.totalComentarios).slice(0,5)).length?(0,b.jsx)("span",{className:"block",children:"No hay usuarios con comentarios aÃºn."}):n.map((a,c)=>(0,b.jsxs)("span",{className:"block",children:[c+1,". ",(0,b.jsx)("b",{children:(0,b.jsx)(ai,{nick:a.nick})})," (",a.totalComentarios," comentarios)"]},a.nick)))]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ¤"}),(0,b.jsx)("b",{children:"Usuarios con mÃ¡s amigos:"})," ",0===(o=ag.map(a=>{let b=a.amigos?a.amigos.length:0;return{nick:a.nick,numAmigos:b}}).filter(a=>a.nick&&a.numAmigos>0).sort((a,b)=>b.numAmigos-a.numAmigos).slice(0,5)).length?(0,b.jsx)("span",{className:"block",children:"No hay usuarios con amigos aÃºn."}):o.map((a,c)=>(0,b.jsxs)("span",{className:"block",children:[c+1,". ",(0,b.jsx)("b",{children:(0,b.jsx)(ai,{nick:a.nick})})," (",a.numAmigos," amigos)"]},a.nick))]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ“–"}),(0,b.jsx)("b",{children:"Usuarios con mÃ¡s historias:"})," ",(p={},ae.forEach(a=>{a.autor&&(p[a.autor]=(p[a.autor]||0)+1)}),0===(q=Object.entries(p).map(([a,b])=>({nick:a,totalHistorias:b})).filter(a=>a.nick&&a.totalHistorias>0).sort((a,b)=>b.totalHistorias-a.totalHistorias).slice(0,5)).length?(0,b.jsx)("span",{className:"block",children:"No hay usuarios con historias aÃºn."}):q.map((a,c)=>(0,b.jsxs)("span",{className:"block",children:[c+1,". ",(0,b.jsx)("b",{children:(0,b.jsx)(ai,{nick:a.nick})})," (",a.totalHistorias," historias)"]},a.nick)))]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,b.jsx)("b",{children:"Usuarios con mÃ¡s concursos ganados:"})," ",0===(r=ag.map(a=>({nick:a.nick,nombre:a.nombre,totalConcursos:a.concursosGanados||0})).filter(a=>a.totalConcursos>0).sort((a,b)=>b.totalConcursos-a.totalConcursos).slice(0,5)).length?(0,b.jsx)("span",{className:"block",children:"No hay usuarios con concursos ganados aÃºn."}):r.map((a,c)=>(0,b.jsxs)("span",{className:"block",children:[c+1,". ",(0,b.jsx)("b",{children:(0,b.jsx)(ai,{nick:a.nick})})," (",a.totalConcursos," concursos)"]},a.nick))]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,b.jsx)("b",{children:"Usuarios con mÃ¡s competiciones superadas:"})," ",0===(s=ag.map(a=>({nick:a.nick,nombre:a.nombre,totalCompeticiones:a.competicionesSuperadas||0})).filter(a=>a.totalCompeticiones>0).sort((a,b)=>b.totalCompeticiones-a.totalCompeticiones).slice(0,5)).length?(0,b.jsx)("span",{className:"block",children:"No hay usuarios con competiciones superadas aÃºn."}):s.map((a,c)=>(0,b.jsxs)("span",{className:"block",children:[c+1,". ",(0,b.jsx)("b",{children:(0,b.jsx)(ai,{nick:a.nick})})," (",a.totalCompeticiones," competiciones)"]},a.nick))]})]})]})]}),u&&(0,b.jsx)("div",{className:"max-w-5xl mx-auto mt-8",children:(0,b.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 rounded-2xl p-1 shadow-2xl",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-600",children:"ðŸ‘‘ EstadÃ­sticas Premium Avanzadas ðŸ‘‘"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-4",children:[(0,b.jsx)("h3",{className:"font-bold text-blue-800 mb-3 text-center",children:"ðŸ“ˆ Tu AnÃ¡lisis Personal"}),(0,b.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸŽ¯ PrecisiÃ³n promedio:"}),(0,b.jsx)("span",{className:"font-bold text-blue-600",children:(()=>{if(w){let a=w.preguntasAcertadas||0,b=a+(w.preguntasFalladas||0);return b>0?(a/b*100).toFixed(1)+"%":"0%"}return"0%"})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"âš¡ Racha actual:"}),(0,b.jsxs)("span",{className:"font-bold text-blue-600",children:[w?.racha||0," dÃ­as"]})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸ“… DÃ­as activo:"}),(0,b.jsx)("span",{className:"font-bold text-blue-600",children:(()=>{if(w?.fechaRegistro){let a=new Date(w.fechaRegistro);return Math.ceil(Math.abs(new Date().getTime()-a.getTime())/864e5)}return 0})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸ† Tu ranking:"}),(0,b.jsx)("span",{className:"font-bold text-blue-600",children:(()=>{if(w&&ag.length>0){let a=ag.map(a=>({...a,puntosTotales:y(a)})).sort((a,b)=>b.puntosTotales-a.puntosTotales).findIndex(a=>a.nick===w.nick)+1;return a>0?`#${a}`:"-"}return"-"})()})]})]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-4",children:[(0,b.jsx)("h3",{className:"font-bold text-green-800 mb-3 text-center",children:"ðŸ“š AnÃ¡lisis por Materias"}),(0,b.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸ”¬ MatemÃ¡ticas:"}),(0,b.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(w){let a=Math.floor((w.estadisticas&&w.estadisticas.matematicas||0)/5)+1;return`Nivel ${a}`}return"Nivel 1"})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸ“– Lenguaje:"}),(0,b.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(w){let a=Math.floor((w.estadisticas&&w.estadisticas.lenguaje||0)/5)+1;return`Nivel ${a}`}return"Nivel 1"})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸŒ GeografÃ­a:"}),(0,b.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(w){let a=Math.floor((w.estadisticas&&w.estadisticas.geografia||0)/5)+1;return`Nivel ${a}`}return"Nivel 1"})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸ“š Historia:"}),(0,b.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(w){let a=Math.floor((w.estadisticas&&w.estadisticas.historia||0)/5)+1;return`Nivel ${a}`}return"Nivel 1"})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸŽ¨ Tu fuerte:"}),(0,b.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(w){let a=[{nombre:"MatemÃ¡ticas",puntos:w.estadisticas&&w.estadisticas.matematicas||0},{nombre:"Lenguaje",puntos:w.estadisticas&&w.estadisticas.lenguaje||0},{nombre:"GeografÃ­a",puntos:w.estadisticas&&w.estadisticas.geografia||0},{nombre:"Historia",puntos:w.estadisticas&&w.estadisticas.historia||0},{nombre:"Literatura",puntos:w.estadisticas&&w.estadisticas.literatura||0},{nombre:"InglÃ©s",puntos:w.estadisticas&&w.estadisticas.ingles||0},{nombre:"Naturaleza",puntos:w.estadisticas&&w.estadisticas.naturaleza||0}].reduce((a,b)=>b.puntos>a.puntos?b:a);return a.puntos>0?a.nombre:"Ninguna aÃºn"}return"Ninguna aÃºn"})()})]})]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-violet-100 rounded-xl p-4",children:[(0,b.jsx)("h3",{className:"font-bold text-purple-800 mb-3 text-center",children:"ðŸŽ¯ Logros y ProyecciÃ³n"}),(0,b.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸ“ˆ Crecimiento:"}),(0,b.jsx)("span",{className:"font-bold text-purple-600",children:(()=>{if(w){let a=w.preguntasAcertadas||0,b=a+(w.preguntasFalladas||0);if(b>0){let c=Math.max(0,Math.floor(a/b*100-50));return`+${c}% sem.`}}return"+0% sem."})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"ðŸŽ¯ Meta semanal:"}),(0,b.jsx)("span",{className:"font-bold text-purple-600",children:(()=>{if(w){let a=w.preguntasAcertadas||0,b=a+(w.preguntasFalladas||0);if(b>0){let c=a/b*100;return c>=75?"75% âœ…":`${c.toFixed(1)}% âŒ`}}return"0% âŒ"})()})]}),(0,b.jsxs)("li",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"â­ PrÃ³ximo nivel:"}),(0,b.jsx)("span",{className:"font-bold text-purple-600",children:(()=>{if(w){let a=y(w),b=Math.floor(a/100);return`${(b+1)*100-a} pts`}return"100 pts"})()})]})]})]})]}),(0,b.jsxs)("div",{className:"mt-6 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4",children:[(0,b.jsx)("h3",{className:"font-bold text-indigo-800 mb-3 text-center",children:"ðŸ“Š GrÃ¡fico de Progreso Semanal"}),(0,b.jsx)("div",{className:"flex items-end justify-between h-32 gap-2",children:[...Array(7)].map((a,c)=>{let d=w?Math.max(0,Math.floor(((w.preguntasAcertadas||0)+(w.preguntasFalladas||0))/7)+(Math.floor(5*Math.random())-2)):Math.floor(5*Math.random())+1,e=Math.max(20,Math.min(100,d/25*80+20)),f=["L","M","X","J","V","S","D"][c],g=c===new Date().getDay()-1||0===new Date().getDay()&&6===c;return(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:`w-8 rounded-t-md ${g?"bg-gradient-to-t from-orange-500 to-red-500":"bg-gradient-to-t from-blue-500 to-purple-500"}`,style:{height:`${e}%`}}),(0,b.jsx)("span",{className:`text-xs mt-1 font-semibold ${g?"text-orange-600":"text-indigo-600"}`,children:f}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:d})]},c)})}),(0,b.jsxs)("div",{className:"text-center mt-3 text-sm text-indigo-600",children:["ðŸ“ˆ ",(0,b.jsx)("strong",{children:"Tendencia:"})," ",(()=>{if(w){let a=w.preguntasAcertadas||0,b=w.preguntasFalladas||0,c=b+a>0?a/(b+a)*100:0;return c>=80?"Â¡Excelente! MantÃ©n este nivel de precisiÃ³n.":c>=60?"Â¡Vas muy bien! MantÃ©n el ritmo esta semana.":c>=40?"Buen progreso. Â¡Sigue practicando!":"Empezando bien. Â¡Cada respuesta cuenta!"}return"Â¡Empieza tu aventura de aprendizaje!"})()]})]}),(0,b.jsxs)("div",{className:"mt-6 bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4",children:[(0,b.jsx)("h3",{className:"font-bold text-orange-800 mb-3 text-center",children:"âš”ï¸ Tu PosiciÃ³n vs. Mejores"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,b.jsx)("div",{className:"text-2xl",children:"ðŸ¥‡"}),(0,b.jsx)("div",{className:"text-xs text-gray-600",children:"1Âº Lugar"}),(0,b.jsx)("div",{className:"font-bold text-yellow-600",children:(()=>{if(ag.length>0){let a=ag.map(a=>({...a,puntosTotales:y(a)})).sort((a,b)=>b.puntosTotales-a.puntosTotales);return a[0]?.puntosTotales||0}return 0})()}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:(()=>{if(ag.length>0){let a=ag.map(a=>({...a,puntosTotales:y(a)})).sort((a,b)=>b.puntosTotales-a.puntosTotales);return a[0]?.nick||"Nadie"}return"Nadie"})()})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg p-3 border-2 border-blue-300",children:[(0,b.jsx)("div",{className:"text-2xl",children:"ðŸ‘‘"}),(0,b.jsx)("div",{className:"text-xs text-blue-600 font-bold",children:"TÃš"}),(0,b.jsx)("div",{className:"font-bold text-blue-600",children:w?y(w):0}),(0,b.jsx)("div",{className:"text-xs text-blue-500",children:(()=>{if(w&&ag.length>0){let a=ag.map(a=>({...a,puntosTotales:y(a)})).sort((a,b)=>b.puntosTotales-a.puntosTotales).findIndex(a=>a.nick===w.nick)+1;return a>0?`Posici\xf3n #${a}`:"Sin clasificar"}return"Sin clasificar"})()})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,b.jsx)("div",{className:"text-2xl",children:"ðŸŽ¯"}),(0,b.jsx)("div",{className:"text-xs text-gray-600",children:"Promedio"}),(0,b.jsx)("div",{className:"font-bold text-gray-600",children:ag.length>0?Math.floor(ag.reduce((a,b)=>a+y(b),0)/ag.length):0}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:`${ag.length} usuarios`})]})]}),(0,b.jsx)("div",{className:"mt-3 text-center text-sm",children:(()=>{if(w&&ag.length>0){let a=Math.floor(ag.reduce((a,b)=>a+y(b),0)/ag.length),c=y(w)-a;return c>0?(0,b.jsxs)("span",{className:"text-green-600",children:["ðŸ“ˆ +",c," puntos sobre el promedio"]}):c<0?(0,b.jsxs)("span",{className:"text-red-600",children:["ðŸ“‰ ",Math.abs(c)," puntos bajo el promedio"]}):(0,b.jsx)("span",{className:"text-blue-600",children:"ðŸŽ¯ Exactamente en el promedio"})}return(0,b.jsx)("span",{className:"text-gray-500",children:"Sin datos para comparar"})})()})]})]})})}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-5xl mx-auto mt-8",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mejores estadÃ­sticas"}),(0,b.jsxs)("ul",{className:"space-y-2 text-center",children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ“–"}),(0,b.jsx)("b",{children:"Historia con mÃ¡s likes:"})," ",(()=>{if(0===ae.length)return"-";let a=ae.reduce((a,b)=>(b.likes||0)>(a.likes||0)?b:a,ae[0]);return(0,b.jsxs)("span",{children:[(0,b.jsx)("b",{children:a.titulo})," por ",(0,b.jsx)("b",{children:(0,b.jsx)(ai,{nick:a.autor})})," ",(0,b.jsxs)("span",{className:"text-pink-600",children:["â¤ï¸ ",a.likes||0]})]})})()]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ’¬"}),(0,b.jsx)("b",{children:"Historia mÃ¡s comentada:"})," ",(()=>{if(0===ae.length)return"-";let a=ae.reduce((a,b)=>(b.comentarios?b.comentarios.length:0)>(a.comentarios?a.comentarios.length:0)?b:a,ae[0]);return(0,b.jsxs)("span",{children:[(0,b.jsx)("b",{children:a.titulo})," por ",(0,b.jsx)("b",{children:(0,b.jsx)(ai,{nick:a.autor})})," ",(0,b.jsxs)("span",{className:"text-blue-600",children:["ðŸ’¬ ",a.comentarios?a.comentarios.length:0]})]})})()]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ«"}),(0,b.jsx)("b",{children:"Centro con mÃ¡s historias creadas:"})," ",(()=>{if(0===ae.length||0===ag.length)return"-";let a={};ag.forEach(b=>{b.nick&&b.centro&&(a[b.nick]=b.centro)});let c={};ae.forEach(b=>{let d=b.centro||a[b.autor]||null;d&&(c[d]=(c[d]||0)+1)});let d=Object.entries(c).sort((a,b)=>b[1]-a[1])[0];return d?(0,b.jsxs)("span",{children:[(0,b.jsx)("b",{children:d[0]})," ",(0,b.jsxs)("span",{className:"text-purple-600",children:["ðŸ« ",d[1]]})]}):"-"})()]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ«"}),(0,b.jsx)("b",{children:"Centro Escolar con mÃ¡s usuarios activos:"})," ",(()=>{if(0===ag.length)return"-";let a={};ag.forEach(b=>{b.centro&&(a[b.centro]=(a[b.centro]||0)+1)});let c=Object.entries(a).sort((a,b)=>b[1]-a[1])[0];return c?(0,b.jsxs)("span",{children:[(0,b.jsx)("b",{children:c[0]})," ",(0,b.jsxs)("span",{className:"text-blue-600",children:["ðŸ« ",c[1]]})]}):"-"})()]})]})]})]})]})}a.i(86085),a.i(6292),a.i(45350),a.s(["default",()=>f],96239)}];

//# sourceMappingURL=src_app_estadisticas_page_tsx_b65eb7e9._.js.map