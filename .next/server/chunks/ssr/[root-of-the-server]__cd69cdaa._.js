module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56677,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);class e{static async getUserData(a,b){try{let c=await fetch(`/api/user-data?nick=${encodeURIComponent(a)}&key=${encodeURIComponent(b)}`);if(!c.ok)throw Error("Error fetching user data");return(await c.json()).value}catch(a){return console.error("Error getting user data:",a),null}}static async setUserData(a,b,c){try{return(await fetch("/api/user-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nick:a,key:b,value:c})})).ok}catch(a){return console.error("Error saving user data:",a),!1}}static async getAllUserData(a){try{let b=await fetch(`/api/user-data?nick=${encodeURIComponent(a)}`);if(!b.ok)throw Error("Error fetching user data");return await b.json()}catch(a){return console.error("Error getting user data:",a),{}}}}a.s(["default",0,()=>{let a=(0,d.useRouter)(),[f,g]=(0,c.useState)(()=>null),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)({victorias:0,participaciones:0,puntuacionTotal:0}),[r,s]=(0,c.useState)(()=>1),t=async()=>{if(!f)return;let a=await e.getUserData(f.nick,"torneos_premium_last_reset"),b=new Date,c=a?new Date(a):null;if(c&&c.getMonth()===b.getMonth()&&c.getFullYear()===b.getFullYear())m(await e.getUserData(f.nick,"torneos_premium")||[]);else{let a=new Date().getMonth(),c=new Date().getFullYear(),d=[{id:"torneo-mensual-1primaria",nombre:"Torneo Mensual 1¬∫ Primaria",descripcion:"Compite en el torneo mensual de 1¬∫ Primaria. 25 preguntas de asignaturas generales.",fechaInicio:new Date().toISOString(),fechaFin:new Date(c,a+1,0).toISOString(),categoria:"general",premio:"Medalla Especial + 200 puntos Liga Premium",maxParticipantes:16,participantes:[],estado:"registro"},{id:"torneo-mensual-2primaria",nombre:"Torneo Mensual 2¬∫ Primaria",descripcion:"Compite en el torneo mensual de 2¬∫ Primaria. 25 preguntas de asignaturas generales.",fechaInicio:new Date().toISOString(),fechaFin:new Date(c,a+1,0).toISOString(),categoria:"general",premio:"Medalla Especial + 200 puntos Liga Premium",maxParticipantes:16,participantes:[],estado:"registro"},{id:"torneo-mensual-3primaria",nombre:"Torneo Mensual 3¬∫ Primaria",descripcion:"Compite en el torneo mensual de 3¬∫ Primaria. 25 preguntas de asignaturas generales.",fechaInicio:new Date().toISOString(),fechaFin:new Date(c,a+1,0).toISOString(),categoria:"general",premio:"Medalla Especial + 200 puntos Liga Premium",maxParticipantes:16,participantes:[],estado:"registro"},{id:"torneo-mensual-4primaria",nombre:"Torneo Mensual 4¬∫ Primaria",descripcion:"Compite en el torneo mensual de 4¬∫ Primaria. 25 preguntas de asignaturas generales.",fechaInicio:new Date().toISOString(),fechaFin:new Date(c,a+1,0).toISOString(),categoria:"general",premio:"Medalla Especial + 200 puntos Liga Premium",maxParticipantes:16,participantes:[],estado:"registro"},{id:"torneo-mensual-5primaria",nombre:"Torneo Mensual 5¬∫ Primaria",descripcion:"Compite en el torneo mensual de 5¬∫ Primaria. 25 preguntas de asignaturas generales.",fechaInicio:new Date().toISOString(),fechaFin:new Date(c,a+1,0).toISOString(),categoria:"general",premio:"Medalla Especial + 200 puntos Liga Premium",maxParticipantes:16,participantes:[],estado:"registro"},{id:"torneo-mensual-6primaria",nombre:"Torneo Mensual 6¬∫ Primaria",descripcion:"Compite en el torneo mensual de 6¬∫ Primaria. 25 preguntas de asignaturas generales.",fechaInicio:new Date().toISOString(),fechaFin:new Date(c,a+1,0).toISOString(),categoria:"general",premio:"Medalla Especial + 200 puntos Liga Premium",maxParticipantes:16,participantes:[],estado:"registro"}];m(d),await e.setUserData(f.nick,"torneos_premium",d),await e.setUserData(f.nick,"torneos_premium_last_reset",b.toISOString())}};(0,c.useEffect)(()=>{},[t,a]),(0,c.useEffect)(()=>{f&&e.getUserData(f.nick,"competiciones_premium").then(a=>{q(a||{victorias:0,participaciones:0,puntuacionTotal:0})})},[f]);let u=a=>{let b=a.match(/torneo-mensual-(\d)primaria/);return!!b&&parseInt(b[1])===r},v=async a=>{if(!f)return;let b=l.map(b=>b.id===a?b.participantes.includes(f.nick)?(alert("Ya est√°s registrado en este torneo."),b):b.participantes.length>=b.maxParticipantes?(alert("Este torneo ya est√° completo."),b):{...b,participantes:[...b.participantes,f.nick]}:b);m(b),await e.setUserData(f.nick,"torneos_premium",b),alert("¬°Te has registrado exitosamente en el torneo!")},w=async b=>{f&&(await e.setUserData(f.nick,"torneo_activo_premium",{torneoId:b.id,curso:b.id.split("-")[2],startTime:new Date().toISOString()}),a.push("/aprende-con-pipo?modo=torneo"))};return j?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-white text-xl",children:"Cargando Torneos Premium..."})}):h?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 p-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"üéØ Torneos Premium"}),(0,b.jsx)("p",{className:"text-purple-100 text-lg",children:"Compite en torneos exclusivos y gana premios especiales"})]}),n?(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8 text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4",children:n.nombre}),(0,b.jsx)("div",{className:"text-6xl mb-4",children:"üéØ"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"Torneo en progreso..."}),(0,b.jsx)("div",{className:"animate-spin text-4xl",children:"‚è≥"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:"Calculando resultados..."})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 p-4",children:(0,b.jsx)("h3",{className:"text-lg font-bold text-white",children:a.nombre})}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:a.descripcion}),(0,b.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Categor√≠a:"}),(0,b.jsx)("span",{className:"font-semibold text-purple-600",children:a.categoria})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Participantes:"}),(0,b.jsxs)("span",{className:"font-semibold",children:[a.participantes.length,"/",a.maxParticipantes]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Estado:"}),(0,b.jsx)("span",{className:`font-semibold ${"registro"===a.estado?"text-green-600":"finalizado"===a.estado?"text-gray-600":"text-blue-600"}`,children:"registro"===a.estado?"Abierto":"finalizado"===a.estado?"Finalizado":"Disponible"})]})]}),(0,b.jsxs)("div",{className:"bg-yellow-50 p-3 rounded mb-4",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-yellow-800",children:"üèÜ Premio:"}),(0,b.jsx)("p",{className:"text-sm text-yellow-700",children:a.premio})]}),"finalizado"===a.estado&&a.ganador&&(0,b.jsxs)("div",{className:"bg-green-50 p-3 rounded mb-4",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-green-800",children:"ü•á Ganador:"}),(0,b.jsx)("p",{className:"text-sm text-green-700",children:a.ganador}),a.resultados&&a.resultados.length>0&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("p",{className:"text-xs text-green-600",children:"Top 3:"}),a.resultados.slice(0,3).map((a,c)=>(0,b.jsxs)("p",{className:"text-xs",children:[c+1,". ",a.nick," - ",a.aciertos,"/25 (",a.puntuacion,"pts)"]},c))]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:["registro"===a.estado&&!a.participantes.includes(f?.nick||"")&&u(a.id)&&(0,b.jsx)("button",{onClick:()=>v(a.id),disabled:a.participantes.length>=a.maxParticipantes,className:"flex-1 bg-purple-600 text-white px-4 py-2 rounded font-semibold hover:bg-purple-700 disabled:bg-gray-400 transition-colors",children:"Registrarse"}),"registro"===a.estado&&!a.participantes.includes(f?.nick||"")&&!u(a.id)&&(0,b.jsxs)("span",{className:"flex-1 text-center bg-gray-100 text-gray-600 px-4 py-2 rounded font-semibold",children:["Solo para ",a.nombre.split(" ")[2]," ",a.nombre.split(" ")[3]]}),a.participantes.includes(f?.nick||"")&&"registro"===a.estado&&(0,b.jsx)("span",{className:"flex-1 text-center bg-green-100 text-green-800 px-4 py-2 rounded font-semibold",children:"‚úì Registrado"}),a.participantes.includes(f?.nick||"")&&(0,b.jsx)("button",{onClick:()=>w(a),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded font-semibold hover:bg-blue-700 transition-colors",children:"Comenzar Torneo"})]})]})]},a.id))}),(0,b.jsxs)("div",{className:"mt-8 bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"üìä Tus Estad√≠sticas en Torneos"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,b.jsxs)("div",{className:"bg-white/20 rounded p-4",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-white",children:p.victorias}),(0,b.jsx)("div",{className:"text-purple-100",children:"Victorias"})]}),(0,b.jsxs)("div",{className:"bg-white/20 rounded p-4",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-white",children:p.participaciones}),(0,b.jsx)("div",{className:"text-purple-100",children:"Participaciones"})]}),(0,b.jsxs)("div",{className:"bg-white/20 rounded p-4",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-white",children:[p.participaciones>0?Math.round(p.victorias/p.participaciones*100):0,"%"]}),(0,b.jsx)("div",{className:"text-purple-100",children:"Tasa de Victoria"})]}),(0,b.jsxs)("div",{className:"bg-white/20 rounded p-4",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-white",children:p.puntuacionTotal}),(0,b.jsx)("div",{className:"text-purple-100",children:"Puntuaci√≥n Total"})]})]})]}),(0,b.jsx)("div",{className:"text-center mt-8",children:(0,b.jsx)("button",{onClick:()=>a.push("/premium-nuevo"),className:"bg-white text-purple-600 px-8 py-3 rounded-lg font-bold hover:bg-purple-50 transition-colors",children:"‚Üê Volver a Premium"})})]})}):null}],56677)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__cd69cdaa._.js.map