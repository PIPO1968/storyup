{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/utils/db.ts"],"sourcesContent":["import { Pool } from 'pg';\r\n\r\nconst pool = new Pool({\r\n    connectionString: process.env.DATABASE_URL,\r\n    ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false,\r\n});\r\n\r\nexport default pool;"],"names":[],"mappings":";;;;AAAA;;;;;;AAEA,MAAM,OAAO,IAAI,4GAAI,CAAC;IAClB,kBAAkB,QAAQ,GAAG,CAAC,YAAY;IAC1C,KAAK,sCAAwC,0BAAgC;AACjF;uCAEe","debugId":null}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/app/api/noticias/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport pool from '@/utils/db';\r\n\r\nasync function ensureTableExists() {\r\n    try {\r\n        await pool.query(`\r\n      CREATE TABLE IF NOT EXISTS noticias (\r\n        id SERIAL PRIMARY KEY,\r\n        titulo TEXT NOT NULL,\r\n        contenido TEXT NOT NULL,\r\n        autor TEXT NOT NULL,\r\n        imagen TEXT,\r\n        fecha TIMESTAMP DEFAULT NOW()\r\n      )\r\n    `);\r\n    } catch (error) {\r\n        console.error('Error creating table:', error);\r\n    }\r\n}\r\n\r\nexport async function GET() {\r\n    try {\r\n        await ensureTableExists();\r\n        const result = await pool.query('SELECT * FROM noticias ORDER BY fecha DESC');\r\n        return NextResponse.json(result.rows);\r\n    } catch (error) {\r\n        console.error('Error fetching news:', error);\r\n        return NextResponse.json({ error: 'Error fetching news' }, { status: 500 });\r\n    }\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        await ensureTableExists();\r\n        const { titulo, contenido, autor, imagen } = await request.json();\r\n\r\n        if (!titulo || !contenido || !autor) {\r\n            return NextResponse.json({ error: 'Missing required fields' }, { status: 400 });\r\n        }\r\n\r\n        const result = await pool.query(\r\n            'INSERT INTO noticias (titulo, contenido, autor, imagen, fecha) VALUES ($1, $2, $3, $4, NOW()) RETURNING *',\r\n            [titulo, contenido, autor, imagen || '']\r\n        );\r\n\r\n        return NextResponse.json(result.rows[0]);\r\n    } catch (error) {\r\n        console.error('Error creating news:', error);\r\n        return NextResponse.json({ error: 'Error creating news' }, { status: 500 });\r\n    }\r\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;;AAEA,eAAe;IACX,IAAI;QACA,MAAM,+HAAI,CAAC,KAAK,CAAC,CAAC;;;;;;;;;IAStB,CAAC;IACD,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;IAC3C;AACJ;AAEO,eAAe;IAClB,IAAI;QACA,MAAM;QACN,MAAM,SAAS,MAAM,+HAAI,CAAC,KAAK,CAAC;QAChC,OAAO,gJAAY,CAAC,IAAI,CAAC,OAAO,IAAI;IACxC,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAsB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACJ;AAEO,eAAe,KAAK,OAAoB;IAC3C,IAAI;QACA,MAAM;QACN,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE/D,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,OAAO;YACjC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QACjF;QAEA,MAAM,SAAS,MAAM,+HAAI,CAAC,KAAK,CAC3B,6GACA;YAAC;YAAQ;YAAW;YAAO,UAAU;SAAG;QAG5C,OAAO,gJAAY,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,EAAE;IAC3C,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAsB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACJ","debugId":null}}]
}